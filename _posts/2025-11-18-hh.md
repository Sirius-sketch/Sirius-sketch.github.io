---
layout: post
title:  "第五章：优化程序性能"
date:   2025-11-19 18:00:00 +0800
categories: [computer]
tags: [github, jekyll]
---

## 5.1 优化编译器的能力和局限性
主要考虑-o1级别的优化

优化必须是安全的（和未优化的版本在所有情况下行为一样），例如

'void twiddle1(long *xp,long *yp)  
{  
    *xp+=*yp;  
    *xp+=*yp;  
}'  
void twiddle2(long *xp,long *yp)
{
    *xp+=2* *yp;
}

twiddle2三次引用内存而twiddle1六次引用内存，但是在xp=yp的情况下，twiddle1的xp乘4，twiddle2的xp乘3，因此2不是1的优化版本。这种两个指针指向内存中同一个位置的情况称为内存别名使用，编译器必须假设不同指针可能指向内存中同一位置，限制了可能的优化策略。

第二个妨碍优化因素：函数调用，例如：

long f();

long func1(){
    return f()+f()+f()+f();
}

long fun2(){
    return 4*f()
}
